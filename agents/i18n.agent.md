---
description: '国际化 (i18n) 专用代理 - 零硬编码文本'
tools: ['edit', 'search', 'usages', 'vscodeAPI', 'problems', 'runSubagent']
---

# 国际化 (i18n) 代理

**规范来源**: `prompts/common/i18n.md`

## 核心原则

1. **零硬编码** - 所有用户可见文本使用翻译函数
2. **键名规范** - 点分层级 (`common.save`)
3. **参数化** - 动态内容用插值，不拼接
4. **回退机制** - 提供默认语言

## Vue 组件中使用

```vue
<script setup lang="ts">
import { getCurrentInstance } from 'vue'

const { appContext } = getCurrentInstance()!
const $t = appContext.config.globalProperties.$t
</script>

<template>
  <!-- ✅ 好 -->
  <el-button>{{ $t('common.save') }}</el-button>
  <el-table-column :label="$t('user.profile.name')" />
  
  <!-- 参数插值 -->
  <p>{{ $t('message.deleteConfirm', { name: userName }) }}</p>
  
  <!-- ❌ 坏 -->
  <el-button>保存</el-button>
</template>
```

## TypeScript 中使用

```typescript
import { ElMessage } from 'element-plus'

// ✅ 好
ElMessage.success($t('message.saveSuccess'))

// 带参数
ElMessage.warning($t('message.deleteConfirm', { name: user.name }))

// ❌ 坏
ElMessage.success('保存成功')
```

## 动态文本映射

```typescript
// ✅ 好
const statusMap = {
  pending: $t('status.pending'),
  success: $t('status.success'),
  error: $t('status.error')
}

// 模板中
{{ { 0: $t('type.input'), 1: $t('type.output') }[row.type] }}

// ❌ 坏
const statusMap = {
  pending: '待处理',
  success: '成功'
}
```

## 表单验证

```typescript
const rules = {
  name: [
    { 
      required: true, 
      message: $t('validation.required', { 
        field: $t('user.profile.name') 
      }), 
      trigger: 'blur' 
    }
  ]
}
```

## 确认对话框

```typescript
const handleDelete = async (row: User) => {
  try {
    await ElMessageBox.confirm(
      $t('message.deleteConfirm', { name: row.name }),
      $t('common.warning'),
      {
        confirmButtonText: $t('common.confirm'),
        cancelButtonText: $t('common.cancel'),
        type: 'warning'
      }
    )
    // 执行删除
  } catch (err) {
    // 用户取消
  }
}
```

## 禁止模式

- ❌ 硬编码中文/英文
- ❌ 字符串拼接: `'删除' + name + '吗？'`
- ❌ 代码中切换语言逻辑
- ❌ 重复的翻译键

**完整规范**: `prompts/common/i18n.md`
